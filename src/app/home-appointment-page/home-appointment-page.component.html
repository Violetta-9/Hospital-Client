<h1 class="text-center">
  Appointment management</h1>

<ng-template matStepLabel>Ð¡hoose a data</ng-template>
<mat-form-field>
  <input matInput [matDatepicker]="picker" placeholder="Choose a date" (dateInput)="newDate($event.value)">
  <mat-datepicker-toggle matSuffix [for]="picker" ></mat-datepicker-toggle>
  <mat-datepicker #picker></mat-datepicker>
</mat-form-field>

<div class="col-lg-12 row">

    <table mat-table [dataSource]="dataSource"  class="mat-elevation-z8">

      <!-- Name Column -->
      <ng-container matColumnDef="doctor">
        <th mat-header-cell *matHeaderCellDef> Doctor </th>
        <td mat-cell *matCellDef="let element">
          {{element.doctorFullName}}
        </td>
      </ng-container>

      <!-- Weight Column -->
      <ng-container matColumnDef="patient">
        <th mat-header-cell *matHeaderCellDef> Patient </th>
        <td mat-cell *matCellDef="let element">
          <a class="text-primary" style="cursor: pointer;" [href]="getPath(element)">{{element.patientFullName}}</a>
        </td>
      </ng-container>

      <!-- Symbol Column -->
      <ng-container matColumnDef="patientPhoneNumber">
        <th mat-header-cell *matHeaderCellDef> Patient Phone Number</th>
        <td mat-cell *matCellDef="let element"> {{element.patientPhoneNumber}} </td>
      </ng-container>

      <!-- Symbol Column -->
      <ng-container matColumnDef="service">
        <th mat-header-cell *matHeaderCellDef> Service </th>
        <td mat-cell *matCellDef="let element"> {{element.serviceName}} </td>
      </ng-container>

      <!-- Symbol Column -->
      <ng-container matColumnDef="specialization">
        <th mat-header-cell *matHeaderCellDef> Specialization </th>
        <td mat-cell *matCellDef="let element"> {{element.specializationName}} </td>
      </ng-container>

      <ng-container matColumnDef="date">
        <th mat-header-cell *matHeaderCellDef> Date </th>
        <td mat-cell *matCellDef="let element"> {{element.dateTime | date}} </td>
      </ng-container>

      <ng-container matColumnDef="action">
        <ng-container *ngIf="role == 'Receptionist'">
        <th mat-header-cell *matHeaderCellDef> Approve </th>
        <td mat-cell *matCellDef="let element"> <mat-slide-toggle [checked]="element.isApprove" (change)="approveAppointment(element,$event)">Approve</mat-slide-toggle> </td>
        </ng-container>
        <ng-container *ngIf="role == 'Doctor'">
          <th mat-header-cell *matHeaderCellDef> Result </th>
          <td mat-cell *matCellDef="let element">
            <div class="d-flex flex-column col-5 mt-2">
              <button  [disabled]="element.resultId" mat-raised-button color="primary" (click)="goToResult(element)"> Record the result</button>
              <small *ngIf="element.resultId" style="color: darkred"> *The result is already written </small>
            </div>
          </td>
        </ng-container>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;" ></tr>
    </table>

</div>


<button class="mt-5"  mat-raised-button color="primary" routerLink="/management/appointment">Create appointment for the patient</button>
